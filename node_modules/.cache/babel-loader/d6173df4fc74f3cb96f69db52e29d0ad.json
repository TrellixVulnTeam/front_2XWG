{"remainingRequest":"/home/freedomsky/hakaton/front/node_modules/babel-loader/lib/index.js!/home/freedomsky/hakaton/front/node_modules/eslint-loader/index.js??ref--13-0!/home/freedomsky/hakaton/front/src/graph/org-chart.js","dependencies":[{"path":"/home/freedomsky/hakaton/front/src/graph/org-chart.js","mtime":1630193837920},{"path":"/home/freedomsky/hakaton/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/freedomsky/hakaton/front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/freedomsky/hakaton/front/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvaG9tZS9mcmVlZG9tc2t5L2hha2F0b24vZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvaG9tZS9mcmVlZG9tc2t5L2hha2F0b24vZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgKiBhcyBkMyBmcm9tICJkMyI7CmltcG9ydCBVdGlsIGZyb20gIi4vdXRpbHMiOwoKdmFyIE9yZ0NoYXJ0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBPcmdDaGFydCgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBPcmdDaGFydCk7CgogICAgdGhpcy5kMyA9IGQzOwogICAgdGhpcy5pbml0KCk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoT3JnQ2hhcnQsIFt7CiAgICBrZXk6ICJpbml0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KCkgewogICAgICB0aGlzLmluaXRWYXJpYWJsZXMoKTsKICAgICAgdGhpcy5pbml0Q2FudmFzKCk7CiAgICAgIHRoaXMuaW5pdFZpcnR1YWxOb2RlKCk7CiAgICAgIHRoaXMuc2V0Q2FudmFzTGlzdGVuZXIoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpbml0VmFyaWFibGVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0VmFyaWFibGVzKCkgewogICAgICB0aGlzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7CiAgICAgIHRoaXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0OwogICAgICB0aGlzLnBhZGRpbmcgPSAxMDA7IC8vIHRyZWUgbm9kZSBzaXplCgogICAgICB0aGlzLm5vZGVXaWR0aCA9IDI0MDsKICAgICAgdGhpcy5ub2RlSGVpZ2h0ID0gMTQ3OyAvLyBvcmcgdW5pdCBzaXplCgogICAgICB0aGlzLnVuaXRQYWRkaW5nID0gMTg7CiAgICAgIHRoaXMudW5pdFdpZHRoID0gMjIwOwogICAgICB0aGlzLnVuaXRIZWlnaHQgPSA4NzsgLy8gYW5pbWF0aW9uIGR1cmF0aW9uCgogICAgICB0aGlzLmR1cmF0aW9uID0gMzAwOwogICAgICB0aGlzLnNjYWxlID0gMS4wOwogICAgICB0aGlzLnNlbGVjdGVkTm9kZSA9IG51bGw7CiAgICB9CiAgfSwgewogICAga2V5OiAiZHJhdyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZHJhdyhkYXRhKSB7CiAgICAgIHRoaXMuZGF0YSA9IHRoaXMuZDMuaGllcmFyY2h5KGRhdGEpOwogICAgICB0aGlzLnRyZWVHZW5lcmF0b3IgPSB0aGlzLmQzLnRyZWUoKS5ub2RlU2l6ZShbdGhpcy5ub2RlV2lkdGgsIHRoaXMubm9kZUhlaWdodF0pOwogICAgICB0aGlzLnVwZGF0ZShudWxsKTsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB0aGlzLmQzLnRpbWVyKGZ1bmN0aW9uICgpIHsKICAgICAgICBzZWxmLmRyYXdDYW52YXMoKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUodGFyZ2V0VHJlZU5vZGUpIHsKICAgICAgdGhpcy50cmVlRGF0YSA9IHRoaXMudHJlZUdlbmVyYXRvcih0aGlzLmRhdGEpOwogICAgICB2YXIgbm9kZXMgPSB0aGlzLnRyZWVEYXRhLmRlc2NlbmRhbnRzKCk7CiAgICAgIHZhciBsaW5rcyA9IHRoaXMudHJlZURhdGEubGlua3MoKTsKICAgICAgdmFyIGFuaW1hdGVkU3RhcnRYID0gMDsKICAgICAgdmFyIGFuaW1hdGVkU3RhcnRZID0gMDsKICAgICAgdmFyIGFuaW1hdGVkRW5kWCA9IDA7CiAgICAgIHZhciBhbmltYXRlZEVuZFkgPSAwOwoKICAgICAgaWYgKHRhcmdldFRyZWVOb2RlKSB7CiAgICAgICAgYW5pbWF0ZWRTdGFydFggPSB0YXJnZXRUcmVlTm9kZS54MDsKICAgICAgICBhbmltYXRlZFN0YXJ0WSA9IHRhcmdldFRyZWVOb2RlLnkwOwogICAgICAgIGFuaW1hdGVkRW5kWCA9IHRhcmdldFRyZWVOb2RlLng7CiAgICAgICAgYW5pbWF0ZWRFbmRZID0gdGFyZ2V0VHJlZU5vZGUueTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVPcmdVbml0cyhub2RlcywgYW5pbWF0ZWRTdGFydFgsIGFuaW1hdGVkU3RhcnRZLCBhbmltYXRlZEVuZFgsIGFuaW1hdGVkRW5kWSk7CiAgICAgIHRoaXMudXBkYXRlTGlua3MobGlua3MsIGFuaW1hdGVkU3RhcnRYLCBhbmltYXRlZFN0YXJ0WSwgYW5pbWF0ZWRFbmRYLCBhbmltYXRlZEVuZFkpOwogICAgICB0aGlzLmFkZENvbG9yS2V5KCk7CiAgICAgIHRoaXMuYmluZE5vZGVUb1RyZWVEYXRhKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlT3JnVW5pdHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZU9yZ1VuaXRzKG5vZGVzLCBhbmltYXRlZFN0YXJ0WCwgYW5pbWF0ZWRTdGFydFksIGFuaW1hdGVkRW5kWCwgYW5pbWF0ZWRFbmRZKSB7CiAgICAgIHZhciBvcmdVbml0U2VsZWN0aW9uID0gdGhpcy52aXJ0dWFsQ29udGFpbmVyTm9kZS5zZWxlY3RBbGwoIi5vcmdVbml0IikuZGF0YShub2RlcywgZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gZFsiY29sb3JLZXkiXTsKICAgICAgfSk7CiAgICAgIG9yZ1VuaXRTZWxlY3Rpb24uYXR0cigiY2xhc3MiLCAib3JnVW5pdCIpLmF0dHIoIngiLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBkYXRhLngwOwogICAgICB9KS5hdHRyKCJ5IiwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gZGF0YS55MDsKICAgICAgfSkudHJhbnNpdGlvbigpLmR1cmF0aW9uKHRoaXMuZHVyYXRpb24pLmF0dHIoIngiLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBkYXRhLng7CiAgICAgIH0pLmF0dHIoInkiLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBkYXRhLnk7CiAgICAgIH0pLmF0dHIoImZpbGxTdHlsZSIsICIjZmYwMDAwIik7CiAgICAgIG9yZ1VuaXRTZWxlY3Rpb24uZW50ZXIoKS5hcHBlbmQoIm9yZ1VuaXQiKS5hdHRyKCJjbGFzcyIsICJvcmdVbml0IikuYXR0cigieCIsIGFuaW1hdGVkU3RhcnRYKS5hdHRyKCJ5IiwgYW5pbWF0ZWRTdGFydFkpLnRyYW5zaXRpb24oKS5kdXJhdGlvbih0aGlzLmR1cmF0aW9uKS5hdHRyKCJ4IiwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gZGF0YS54OwogICAgICB9KS5hdHRyKCJ5IiwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gZGF0YS55OwogICAgICB9KS5hdHRyKCJmaWxsU3R5bGUiLCAiI2ZmMDAwMCIpOwogICAgICBvcmdVbml0U2VsZWN0aW9uLmV4aXQoKS50cmFuc2l0aW9uKCkuZHVyYXRpb24odGhpcy5kdXJhdGlvbikuYXR0cigieCIsIGFuaW1hdGVkRW5kWCkuYXR0cigieSIsIGFuaW1hdGVkRW5kWSkucmVtb3ZlKCk7IC8vIHJlY29yZCBvcmlnaW4gaW5kZXggZm9yIGFuaW1hdGlvbgoKICAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbiAodHJlZU5vZGUpIHsKICAgICAgICB0cmVlTm9kZVsieDAiXSA9IHRyZWVOb2RlLng7CiAgICAgICAgdHJlZU5vZGVbInkwIl0gPSB0cmVlTm9kZS55OwogICAgICB9KTsKICAgICAgb3JnVW5pdFNlbGVjdGlvbiA9IG51bGw7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlTGlua3MiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUxpbmtzKGxpbmtzLCBhbmltYXRlZFN0YXJ0WCwgYW5pbWF0ZWRTdGFydFksIGFuaW1hdGVkRW5kWCwgYW5pbWF0ZWRFbmRZKSB7CiAgICAgIHZhciBsaW5rU2VsZWN0aW9uID0gdGhpcy52aXJ0dWFsQ29udGFpbmVyTm9kZS5zZWxlY3RBbGwoIi5saW5rIikuZGF0YShsaW5rcywgZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gZC5zb3VyY2VbImNvbG9yS2V5Il0gKyAiOiIgKyBkLnRhcmdldFsiY29sb3JLZXkiXTsKICAgICAgfSk7CiAgICAgIGxpbmtTZWxlY3Rpb24uYXR0cigiY2xhc3MiLCAibGluayIpLmF0dHIoInNvdXJjZVgiLCBmdW5jdGlvbiAobGlua0RhdGEpIHsKICAgICAgICByZXR1cm4gbGlua0RhdGEuc291cmNlWyJ4MDAiXTsKICAgICAgfSkuYXR0cigic291cmNlWSIsIGZ1bmN0aW9uIChsaW5rRGF0YSkgewogICAgICAgIHJldHVybiBsaW5rRGF0YS5zb3VyY2VbInkwMCJdOwogICAgICB9KS5hdHRyKCJ0YXJnZXRYIiwgZnVuY3Rpb24gKGxpbmtEYXRhKSB7CiAgICAgICAgcmV0dXJuIGxpbmtEYXRhLnRhcmdldFsieDAwIl07CiAgICAgIH0pLmF0dHIoInRhcmdldFkiLCBmdW5jdGlvbiAobGlua0RhdGEpIHsKICAgICAgICByZXR1cm4gbGlua0RhdGEudGFyZ2V0WyJ5MDAiXTsKICAgICAgfSkudHJhbnNpdGlvbigpLmR1cmF0aW9uKHRoaXMuZHVyYXRpb24pLmF0dHIoInNvdXJjZVgiLCBmdW5jdGlvbiAobGlua0RhdGEpIHsKICAgICAgICByZXR1cm4gbGlua0RhdGEuc291cmNlLng7CiAgICAgIH0pLmF0dHIoInNvdXJjZVkiLCBmdW5jdGlvbiAobGlua0RhdGEpIHsKICAgICAgICByZXR1cm4gbGlua0RhdGEuc291cmNlLnk7CiAgICAgIH0pLmF0dHIoInRhcmdldFgiLCBmdW5jdGlvbiAobGlua0RhdGEpIHsKICAgICAgICByZXR1cm4gbGlua0RhdGEudGFyZ2V0Lng7CiAgICAgIH0pLmF0dHIoInRhcmdldFkiLCBmdW5jdGlvbiAobGlua0RhdGEpIHsKICAgICAgICByZXR1cm4gbGlua0RhdGEudGFyZ2V0Lnk7CiAgICAgIH0pOwogICAgICBsaW5rU2VsZWN0aW9uLmVudGVyKCkuYXBwZW5kKCJsaW5rIikuYXR0cigiY2xhc3MiLCAibGluayIpLmF0dHIoInNvdXJjZVgiLCBhbmltYXRlZFN0YXJ0WCkuYXR0cigic291cmNlWSIsIGFuaW1hdGVkU3RhcnRZKS5hdHRyKCJ0YXJnZXRYIiwgYW5pbWF0ZWRTdGFydFgpLmF0dHIoInRhcmdldFkiLCBhbmltYXRlZFN0YXJ0WSkudHJhbnNpdGlvbigpLmR1cmF0aW9uKHRoaXMuZHVyYXRpb24pLmF0dHIoInNvdXJjZVgiLCBmdW5jdGlvbiAobGluaykgewogICAgICAgIHJldHVybiBsaW5rLnNvdXJjZS54OwogICAgICB9KS5hdHRyKCJzb3VyY2VZIiwgZnVuY3Rpb24gKGxpbmspIHsKICAgICAgICByZXR1cm4gbGluay5zb3VyY2UueTsKICAgICAgfSkuYXR0cigidGFyZ2V0WCIsIGZ1bmN0aW9uIChsaW5rKSB7CiAgICAgICAgcmV0dXJuIGxpbmsudGFyZ2V0Lng7CiAgICAgIH0pLmF0dHIoInRhcmdldFkiLCBmdW5jdGlvbiAobGluaykgewogICAgICAgIHJldHVybiBsaW5rLnRhcmdldC55OwogICAgICB9KTsKICAgICAgbGlua1NlbGVjdGlvbi5leGl0KCkudHJhbnNpdGlvbigpLmR1cmF0aW9uKHRoaXMuZHVyYXRpb24pLmF0dHIoInNvdXJjZVgiLCBhbmltYXRlZEVuZFgpLmF0dHIoInNvdXJjZVkiLCBhbmltYXRlZEVuZFkpLmF0dHIoInRhcmdldFgiLCBhbmltYXRlZEVuZFgpLmF0dHIoInRhcmdldFkiLCBhbmltYXRlZEVuZFkpLnJlbW92ZSgpOyAvLyByZWNvcmQgb3JpZ2luIGRhdGEgZm9yIGFuaW1hdGlvbgoKICAgICAgbGlua3MuZm9yRWFjaChmdW5jdGlvbiAodHJlZU5vZGUpIHsKICAgICAgICB0cmVlTm9kZS5zb3VyY2VbIngwMCJdID0gdHJlZU5vZGUuc291cmNlLng7CiAgICAgICAgdHJlZU5vZGUuc291cmNlWyJ5MDAiXSA9IHRyZWVOb2RlLnNvdXJjZS55OwogICAgICAgIHRyZWVOb2RlLnRhcmdldFsieDAwIl0gPSB0cmVlTm9kZS50YXJnZXQueDsKICAgICAgICB0cmVlTm9kZS50YXJnZXRbInkwMCJdID0gdHJlZU5vZGUudGFyZ2V0Lnk7CiAgICAgIH0pOwogICAgICBsaW5rU2VsZWN0aW9uID0gbnVsbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpbml0Q2FudmFzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0Q2FudmFzKCkgewogICAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMuZDMuc2VsZWN0KCIjb3JnLWNoYXJ0LWNvbnRhaW5lciIpOwogICAgICB0aGlzLmNhbnZhc05vZGUgPSB0aGlzLmNvbnRhaW5lci5hcHBlbmQoImNhbnZhcyIpLmF0dHIoImNsYXNzIiwgIm9yZ0NoYXJ0IikuYXR0cigid2lkdGgiLCB0aGlzLndpZHRoKS5hdHRyKCJoZWlnaHQiLCB0aGlzLmhlaWdodCk7CiAgICAgIHRoaXMuaGlkZGVuQ2FudmFzTm9kZSA9IHRoaXMuY29udGFpbmVyLmFwcGVuZCgiY2FudmFzIikuYXR0cigiY2xhc3MiLCAib3JnQ2hhcnQiKS5hdHRyKCJ3aWR0aCIsIHRoaXMud2lkdGgpLmF0dHIoImhlaWdodCIsIHRoaXMuaGVpZ2h0KS5zdHlsZSgiZGlzcGxheSIsICJub25lIik7CiAgICAgIHRoaXMuY29udGV4dCA9IHRoaXMuY2FudmFzTm9kZS5ub2RlKCkuZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgdGhpcy5jb250ZXh0LnRyYW5zbGF0ZSh0aGlzLndpZHRoIC8gMiwgdGhpcy5wYWRkaW5nKTsKICAgICAgdGhpcy5oaWRkZW5Db250ZXh0ID0gdGhpcy5oaWRkZW5DYW52YXNOb2RlLm5vZGUoKS5nZXRDb250ZXh0KCIyZCIpOwogICAgICB0aGlzLmhpZGRlbkNvbnRleHQudHJhbnNsYXRlKHRoaXMud2lkdGggLyAyLCB0aGlzLnBhZGRpbmcpOwogICAgfQogIH0sIHsKICAgIGtleTogImluaXRWaXJ0dWFsTm9kZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdFZpcnR1YWxOb2RlKCkgewogICAgICB2YXIgdmlydHVhbENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInJvb3QiKTsKICAgICAgdGhpcy52aXJ0dWFsQ29udGFpbmVyTm9kZSA9IHRoaXMuZDMuc2VsZWN0KHZpcnR1YWxDb250YWluZXIpOwogICAgICB0aGlzLmNvbG9yTm9kZU1hcCA9IHt9OwogICAgfQogIH0sIHsKICAgIGtleTogImFkZENvbG9yS2V5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRDb2xvcktleSgpIHsKICAgICAgLy8gZ2l2ZSBlYWNoIG5vZGUgYSB1bmlxdWUgY29sb3IKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB0aGlzLnZpcnR1YWxDb250YWluZXJOb2RlLnNlbGVjdEFsbCgiLm9yZ1VuaXQiKS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgbm9kZSA9IHNlbGYuZDMuc2VsZWN0KHRoaXMpOwogICAgICAgIHZhciBuZXdDb2xvciA9IFV0aWwucmFuZG9tQ29sb3IoKTsKCiAgICAgICAgd2hpbGUgKHNlbGYuY29sb3JOb2RlTWFwW25ld0NvbG9yXSkgewogICAgICAgICAgbmV3Q29sb3IgPSBVdGlsLnJhbmRvbUNvbG9yKCk7CiAgICAgICAgfQoKICAgICAgICBub2RlLmF0dHIoImNvbG9yS2V5IiwgbmV3Q29sb3IpOwogICAgICAgIG5vZGUuZGF0YSgpWzBdWyJjb2xvcktleSJdID0gbmV3Q29sb3I7CiAgICAgICAgc2VsZi5jb2xvck5vZGVNYXBbbmV3Q29sb3JdID0gbm9kZTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiYmluZE5vZGVUb1RyZWVEYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBiaW5kTm9kZVRvVHJlZURhdGEoKSB7CiAgICAgIC8vIGdpdmUgZWFjaCBub2RlIGEgdW5pcXVlIGNvbG9yCiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgdGhpcy52aXJ0dWFsQ29udGFpbmVyTm9kZS5zZWxlY3RBbGwoIi5vcmdVbml0IikuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG5vZGUgPSBzZWxmLmQzLnNlbGVjdCh0aGlzKTsKICAgICAgICB2YXIgZGF0YSA9IG5vZGUuZGF0YSgpWzBdOwogICAgICAgIGRhdGEubm9kZSA9IG5vZGU7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImRyYXdDYW52YXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXdDYW52YXMoKSB7CiAgICAgIHRoaXMuZHJhd1Nob3dDYW52YXMoKTsKICAgICAgdGhpcy5kcmF3SGlkZGVuQ2FudmFzKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZHJhd1Nob3dDYW52YXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXdTaG93Q2FudmFzKCkgewogICAgICB0aGlzLmNvbnRleHQuY2xlYXJSZWN0KC01MDAwMCwgLTEwMDAwLCAxMDAwMDAsIDEwMDAwMCk7CiAgICAgIHZhciBzZWxmID0gdGhpczsgLy8gZHJhdyBsaW5rcwoKICAgICAgdGhpcy52aXJ0dWFsQ29udGFpbmVyTm9kZS5zZWxlY3RBbGwoIi5saW5rIikuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG5vZGUgPSBzZWxmLmQzLnNlbGVjdCh0aGlzKTsKICAgICAgICB2YXIgbGlua1BhdGggPSBzZWxmLmQzLmxpbmtWZXJ0aWNhbCgpLngoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgIHJldHVybiBkLng7CiAgICAgICAgfSkueShmdW5jdGlvbiAoZCkgewogICAgICAgICAgcmV0dXJuIGQueTsKICAgICAgICB9KS5zb3VyY2UoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgeDogbm9kZS5hdHRyKCJzb3VyY2VYIiksCiAgICAgICAgICAgIHk6IG5vZGUuYXR0cigic291cmNlWSIpCiAgICAgICAgICB9OwogICAgICAgIH0pLnRhcmdldChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB4OiBub2RlLmF0dHIoInRhcmdldFgiKSwKICAgICAgICAgICAgeTogbm9kZS5hdHRyKCJ0YXJnZXRZIikKICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHBhdGggPSBuZXcgUGF0aDJEKGxpbmtQYXRoKCkpOwogICAgICAgIHNlbGYuY29udGV4dC5zdHJva2VTdHlsZSA9ICIjNTk1OTU5IjsKICAgICAgICBzZWxmLmNvbnRleHQuc3Ryb2tlKHBhdGgpOwogICAgICB9KTsKICAgICAgdGhpcy52aXJ0dWFsQ29udGFpbmVyTm9kZS5zZWxlY3RBbGwoIi5vcmdVbml0IikuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG5vZGUgPSBzZWxmLmQzLnNlbGVjdCh0aGlzKTsKICAgICAgICB2YXIgdHJlZU5vZGUgPSBub2RlLmRhdGEoKVswXTsKICAgICAgICB2YXIgZGF0YSA9IHRyZWVOb2RlLmRhdGE7CiAgICAgICAgdmFyIGluZGV4WCA9IE51bWJlcihub2RlLmF0dHIoIngiKSkgLSBzZWxmLnVuaXRXaWR0aCAvIDI7CiAgICAgICAgdmFyIGluZGV4WSA9IE51bWJlcihub2RlLmF0dHIoInkiKSkgLSBzZWxmLnVuaXRIZWlnaHQgLyAyOwogICAgICAgIHZhciBtYXhXaWR0aCA9IHNlbGYudW5pdFdpZHRoIC0gMiAqIHNlbGYudW5pdFBhZGRpbmc7IC8vIGRyYXcgdW5pdCBvdXRsaW5lIHJlY3QgKGlmIHlvdSB3YW50IHRvIG1vZGlmeSB0aGlzIGxpbmUgPT09PiAgIHBsZWFzZSBtb2RpZnkgdGhlIHNhbWUgbGluZSBpbiBgZHJhd0hpZGRlbkNhbnZhc2ApCiAgICAgICAgLy8gVXRpbC50ZXh0KHNlbGYuY29udGV4dCwgZGF0YS50aXRsZSwgaW5kZXhYICsgc2VsZi51bml0UGFkZGluZywgaW5kZXhZICsgc2VsZi51bml0UGFkZGluZyArIDMwLCAnMjBweCcsICcjMDAwMDAwJykKCiAgICAgICAgdmFyIHRpdGxlTGluZUNvdW50ID0gVXRpbC53cmFwVGV4dChzZWxmLmNvbnRleHQsIGRhdGEubmFtZSwgaW5kZXhYICsgc2VsZi51bml0UGFkZGluZywgaW5kZXhZICsgc2VsZi51bml0UGFkZGluZyArIDEzICsgMTYsIG1heFdpZHRoLCAiMTMiLCAxMywgIiMyNjI2MjYiKTsKICAgICAgICB2YXIgZGlzY3JpcHRpb25MaW5lQ291bnQgPSBVdGlsLndyYXBUZXh0KHNlbGYuY29udGV4dCwgZGF0YS50aXRsZSwgaW5kZXhYICsgc2VsZi51bml0UGFkZGluZywgaW5kZXhZICsgc2VsZi51bml0UGFkZGluZyArIDEyICsgMjMgKyAxMyAqIHRpdGxlTGluZUNvdW50LCBtYXhXaWR0aCwgIjEyIiwgMTIsICIjNTk1OTU5Iik7IC8vIGJvcmRlcgoKICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZE5vZGUgPT09IGRhdGEuaWQpIHsKICAgICAgICAgIHNlbGYuY29udGV4dC5maWxsU3R5bGUgPSAiIzA5NkREOSI7CiAgICAgICAgICBVdGlsLnJvdW5kUmVjdChzZWxmLmNvbnRleHQsIGluZGV4WCAtIDMsIGluZGV4WSAtIDMsIHNlbGYudW5pdFdpZHRoICsgNiwgc2VsZi51bml0UGFkZGluZyArIHNlbGYudW5pdFBhZGRpbmcgKyAxNiArIDExICsgMTMgKiB0aXRsZUxpbmVDb3VudCArIDEyICogZGlzY3JpcHRpb25MaW5lQ291bnQgKyA2LCAxOCwgdHJ1ZSwgZmFsc2UpOwogICAgICAgIH0KCiAgICAgICAgc2VsZi5jb250ZXh0LmZpbGxTdHlsZSA9ICIjZmZmIjsKICAgICAgICBVdGlsLnJvdW5kUmVjdChzZWxmLmNvbnRleHQsIGluZGV4WCwgaW5kZXhZLCBzZWxmLnVuaXRXaWR0aCwgc2VsZi51bml0UGFkZGluZyArIHNlbGYudW5pdFBhZGRpbmcgKyAxNiArIDExICsgMTMgKiB0aXRsZUxpbmVDb3VudCArIDEyICogZGlzY3JpcHRpb25MaW5lQ291bnQsIDE2LCB0cnVlLCBmYWxzZSk7CiAgICAgICAgc2VsZi5jb250ZXh0LmZpbGxTdHlsZSA9ICIjRENERkVCIjsKICAgICAgICBVdGlsLnJvdW5kUmVjdChzZWxmLmNvbnRleHQsIGluZGV4WCArIHNlbGYudW5pdFBhZGRpbmcsIGluZGV4WSArIHNlbGYudW5pdFBhZGRpbmcsIHNlbGYudW5pdFdpZHRoIC0gMzYsIDQsIDIsIHRydWUsIGZhbHNlKTsKCiAgICAgICAgaWYgKHNlbGYucGVyY2VudEVuZXJneSA8IDUwKSB7CiAgICAgICAgICBzZWxmLmNvbnRleHQuZmlsbFN0eWxlID0gIiNENzc3NkEiOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZWxmLmNvbnRleHQuZmlsbFN0eWxlID0gIiM5MUI5NjkiOwogICAgICAgIH0KCiAgICAgICAgVXRpbC5yb3VuZFJlY3Qoc2VsZi5jb250ZXh0LCBpbmRleFggKyBzZWxmLnVuaXRQYWRkaW5nLCBpbmRleFkgKyBzZWxmLnVuaXRQYWRkaW5nLCAoc2VsZi51bml0V2lkdGggLSAzNikgLyAxMDAgKiBkYXRhLnBlcmNlbnRFbmVyZ3ksIDQsIDIsIHRydWUsIGZhbHNlKTsKICAgICAgICBVdGlsLndyYXBUZXh0KHNlbGYuY29udGV4dCwgZGF0YS5uYW1lLCBpbmRleFggKyBzZWxmLnVuaXRQYWRkaW5nLCBpbmRleFkgKyBzZWxmLnVuaXRQYWRkaW5nICsgMTMgKyAxNiwgbWF4V2lkdGgsICIxMyIsIDEzLCAiIzI2MjYyNiIpOwogICAgICAgIFV0aWwud3JhcFRleHQoc2VsZi5jb250ZXh0LCBkYXRhLnRpdGxlLCBpbmRleFggKyBzZWxmLnVuaXRQYWRkaW5nLCBpbmRleFkgKyBzZWxmLnVuaXRQYWRkaW5nICsgMTIgKyAyMyArIDEzICogdGl0bGVMaW5lQ291bnQsIG1heFdpZHRoLCAiMTIiLCAxMiwgIiM1OTU5NTkiKTsKICAgICAgfSk7CiAgICB9CiAgICAvKioKICAgICAqIGZpbGwgdGhlIG5vZGUgb3V0bGluZSB3aXRoIGNvbG9yS2V5IGNvbG9yCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZHJhd0hpZGRlbkNhbnZhcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZHJhd0hpZGRlbkNhbnZhcygpIHsKICAgICAgdGhpcy5oaWRkZW5Db250ZXh0LmNsZWFyUmVjdCgtNTAwMDAsIC0xMDAwMCwgMTAwMDAwLCAxMDAwMDApOwogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHRoaXMudmlydHVhbENvbnRhaW5lck5vZGUuc2VsZWN0QWxsKCIub3JnVW5pdCIpLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBub2RlID0gc2VsZi5kMy5zZWxlY3QodGhpcyk7CiAgICAgICAgc2VsZi5oaWRkZW5Db250ZXh0LmZpbGxTdHlsZSA9IG5vZGUuYXR0cigiY29sb3JLZXkiKTsKICAgICAgICBVdGlsLnJvdW5kUmVjdChzZWxmLmhpZGRlbkNvbnRleHQsIE51bWJlcihub2RlLmF0dHIoIngiKSkgLSBzZWxmLnVuaXRXaWR0aCAvIDIsIE51bWJlcihub2RlLmF0dHIoInkiKSkgLSBzZWxmLnVuaXRIZWlnaHQgLyAyLCBzZWxmLnVuaXRXaWR0aCwgc2VsZi51bml0SGVpZ2h0LCA0LCB0cnVlLCBmYWxzZSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNldENhbnZhc0xpc3RlbmVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRDYW52YXNMaXN0ZW5lcigpIHsKICAgICAgdGhpcy5zZXRDbGlja0xpc3RlbmVyKCk7CiAgICAgIHRoaXMuc2V0RHJhZ0xpc3RlbmVyKCk7CiAgICAgIHRoaXMuc2V0TW91c2VXaGVlbFpvb21MaXN0ZW5lcigpOwogICAgfQogIH0sIHsKICAgIGtleTogInNldENsaWNrTGlzdGVuZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldENsaWNrTGlzdGVuZXIoKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgdGhpcy5jYW52YXNOb2RlLm5vZGUoKS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIGNvbG9yU3RyID0gVXRpbC5nZXRDb2xvclN0ckZyb21DYW52YXMoc2VsZi5oaWRkZW5Db250ZXh0LCBlLmxheWVyWCwgZS5sYXllclkpOwogICAgICAgIHZhciBub2RlID0gc2VsZi5jb2xvck5vZGVNYXBbY29sb3JTdHJdOwoKICAgICAgICBpZiAobm9kZSkgewogICAgICAgICAgc2VsZi50b2dnbGVUcmVlTm9kZShub2RlLmRhdGEoKVswXSk7CiAgICAgICAgICBzZWxmLnNlbGVjdGVkTm9kZSA9IG5vZGUuZGF0YSgpWzBdLmRhdGEuaWQ7CiAgICAgICAgICBzZWxmLnVwZGF0ZShub2RlLmRhdGEoKVswXSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRNb3VzZVdoZWVsWm9vbUxpc3RlbmVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRNb3VzZVdoZWVsWm9vbUxpc3RlbmVyKCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHRoaXMuY2FudmFzTm9kZS5ub2RlKCkuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V3aGVlbCIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgIGlmIChldmVudC5kZWx0YVkgPCAwKSB7CiAgICAgICAgICBzZWxmLmJpZ2dlcigpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZWxmLnNtYWxsZXIoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNldERyYWdMaXN0ZW5lciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RHJhZ0xpc3RlbmVyKCkgewogICAgICB0aGlzLm9uRHJhZ18gPSBmYWxzZTsKICAgICAgdGhpcy5kcmFnU3RhcnRQb2ludF8gPSB7CiAgICAgICAgeDogMCwKICAgICAgICB5OiAwCiAgICAgIH07CiAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgIHRoaXMuY2FudmFzTm9kZS5ub2RlKCkub25tb3VzZWRvd24gPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHNlbGYuZHJhZ1N0YXJ0UG9pbnRfLnggPSBlLng7CiAgICAgICAgc2VsZi5kcmFnU3RhcnRQb2ludF8ueSA9IGUueTsKICAgICAgICBzZWxmLm9uRHJhZ18gPSB0cnVlOwogICAgICB9OwoKICAgICAgdGhpcy5jYW52YXNOb2RlLm5vZGUoKS5vbm1vdXNlbW92ZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKCFzZWxmLm9uRHJhZ18pIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHNlbGYuY29udGV4dC50cmFuc2xhdGUoKGUueCAtIHNlbGYuZHJhZ1N0YXJ0UG9pbnRfLngpIC8gc2VsZi5zY2FsZSwgKGUueSAtIHNlbGYuZHJhZ1N0YXJ0UG9pbnRfLnkpIC8gc2VsZi5zY2FsZSk7CiAgICAgICAgc2VsZi5oaWRkZW5Db250ZXh0LnRyYW5zbGF0ZSgoZS54IC0gc2VsZi5kcmFnU3RhcnRQb2ludF8ueCkgLyBzZWxmLnNjYWxlLCAoZS55IC0gc2VsZi5kcmFnU3RhcnRQb2ludF8ueSkgLyBzZWxmLnNjYWxlKTsKICAgICAgICBzZWxmLmRyYWdTdGFydFBvaW50Xy54ID0gZS54OwogICAgICAgIHNlbGYuZHJhZ1N0YXJ0UG9pbnRfLnkgPSBlLnk7CiAgICAgIH07CgogICAgICB0aGlzLmNhbnZhc05vZGUubm9kZSgpLm9ubW91c2VvdXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHNlbGYub25EcmFnXykgewogICAgICAgICAgc2VsZi5vbkRyYWdfID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgdGhpcy5jYW52YXNOb2RlLm5vZGUoKS5vbm1vdXNldXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHNlbGYub25EcmFnXykgewogICAgICAgICAgc2VsZi5vbkRyYWdfID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogInRvZ2dsZVRyZWVOb2RlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b2dnbGVUcmVlTm9kZSh0cmVlTm9kZSkgewogICAgICBpZiAodHJlZU5vZGUuY2hpbGRyZW4pIHsKICAgICAgICB0cmVlTm9kZS5fY2hpbGRyZW4gPSB0cmVlTm9kZS5jaGlsZHJlbjsKICAgICAgICB0cmVlTm9kZS5jaGlsZHJlbiA9IG51bGw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdHJlZU5vZGUuY2hpbGRyZW4gPSB0cmVlTm9kZS5fY2hpbGRyZW47CiAgICAgICAgdHJlZU5vZGUuX2NoaWxkcmVuID0gbnVsbDsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImJpZ2dlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYmlnZ2VyKCkgewogICAgICBpZiAodGhpcy5zY2FsZSA+IDcpIHJldHVybjsKICAgICAgdGhpcy5jbGVhckNhbnZhc18oKTsKICAgICAgdGhpcy5zY2FsZSA9IHRoaXMuc2NhbGUgKiA1IC8gNDsKICAgICAgdGhpcy5jb250ZXh0LnNjYWxlKDUgLyA0LCA1IC8gNCk7CiAgICAgIHRoaXMuaGlkZGVuQ29udGV4dC5zY2FsZSg1IC8gNCwgNSAvIDQpOwogICAgfQogIH0sIHsKICAgIGtleTogInNtYWxsZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNtYWxsZXIoKSB7CiAgICAgIGlmICh0aGlzLnNjYWxlIDwgMC4yKSByZXR1cm47CiAgICAgIHRoaXMuY2xlYXJDYW52YXNfKCk7CiAgICAgIHRoaXMuc2NhbGUgPSB0aGlzLnNjYWxlICogNCAvIDU7CiAgICAgIHRoaXMuY29udGV4dC5zY2FsZSg0IC8gNSwgNCAvIDUpOwogICAgICB0aGlzLmhpZGRlbkNvbnRleHQuc2NhbGUoNCAvIDUsIDQgLyA1KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjbGVhckNhbnZhc18iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyQ2FudmFzXygpIHsKICAgICAgdGhpcy5jb250ZXh0LmNsZWFyUmVjdCgtMTAwMDAwMCwgLTEwMDAwLCAyMDAwMDAwLCAyMDAwMDAwKTsKICAgICAgdGhpcy5oaWRkZW5Db250ZXh0LmNsZWFyUmVjdCgtMTAwMDAwMCwgLTEwMDAwLCAyMDAwMDAwLCAyMDAwMDAwKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBPcmdDaGFydDsKfSgpOwoKZXhwb3J0IGRlZmF1bHQgT3JnQ2hhcnQ7"},{"version":3,"sources":["/home/freedomsky/hakaton/front/src/graph/org-chart.js"],"names":["d3","Util","OrgChart","init","initVariables","initCanvas","initVirtualNode","setCanvasListener","width","window","innerWidth","height","innerHeight","padding","nodeWidth","nodeHeight","unitPadding","unitWidth","unitHeight","duration","scale","selectedNode","data","hierarchy","treeGenerator","tree","nodeSize","update","self","timer","drawCanvas","targetTreeNode","treeData","nodes","descendants","links","animatedStartX","animatedStartY","animatedEndX","animatedEndY","x0","y0","x","y","updateOrgUnits","updateLinks","addColorKey","bindNodeToTreeData","orgUnitSelection","virtualContainerNode","selectAll","d","attr","transition","enter","append","exit","remove","forEach","treeNode","linkSelection","source","target","linkData","link","container","select","canvasNode","hiddenCanvasNode","style","context","node","getContext","translate","hiddenContext","virtualContainer","document","createElement","colorNodeMap","each","newColor","randomColor","drawShowCanvas","drawHiddenCanvas","clearRect","linkPath","linkVertical","path","Path2D","strokeStyle","stroke","indexX","Number","indexY","maxWidth","titleLineCount","wrapText","name","discriptionLineCount","title","id","fillStyle","roundRect","percentEnergy","setClickListener","setDragListener","setMouseWheelZoomListener","addEventListener","e","colorStr","getColorStrFromCanvas","layerX","layerY","toggleTreeNode","event","preventDefault","deltaY","bigger","smaller","onDrag_","dragStartPoint_","onmousedown","onmousemove","onmouseout","onmouseup","children","_children","clearCanvas_"],"mappings":"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","sourcesContent":["import * as d3 from \"d3\";\nimport Util from \"./utils\";\n\nclass OrgChart {\n  constructor() {\n    this.d3 = d3;\n    this.init();\n  }\n\n  init() {\n    this.initVariables();\n    this.initCanvas();\n    this.initVirtualNode();\n    this.setCanvasListener();\n  }\n\n  initVariables() {\n    this.width = window.innerWidth;\n    this.height = window.innerHeight;\n    this.padding = 100;\n    // tree node size\n    this.nodeWidth = 240;\n    this.nodeHeight = 147;\n    // org unit size\n    this.unitPadding = 18;\n    this.unitWidth = 220;\n    this.unitHeight = 87;\n    // animation duration\n    this.duration = 300;\n    this.scale = 1.0;\n    this.selectedNode = null;\n  }\n\n  draw(data) {\n    this.data = this.d3.hierarchy(data);\n    this.treeGenerator = this.d3\n      .tree()\n      .nodeSize([this.nodeWidth, this.nodeHeight]);\n    this.update(null);\n    const self = this;\n    this.d3.timer(function () {\n      self.drawCanvas();\n    });\n  }\n\n  update(targetTreeNode) {\n    this.treeData = this.treeGenerator(this.data);\n    const nodes = this.treeData.descendants();\n    const links = this.treeData.links();\n    let animatedStartX = 0;\n    let animatedStartY = 0;\n    let animatedEndX = 0;\n    let animatedEndY = 0;\n    if (targetTreeNode) {\n      animatedStartX = targetTreeNode.x0;\n      animatedStartY = targetTreeNode.y0;\n      animatedEndX = targetTreeNode.x;\n      animatedEndY = targetTreeNode.y;\n    }\n    this.updateOrgUnits(\n      nodes,\n      animatedStartX,\n      animatedStartY,\n      animatedEndX,\n      animatedEndY\n    );\n    this.updateLinks(\n      links,\n      animatedStartX,\n      animatedStartY,\n      animatedEndX,\n      animatedEndY\n    );\n    this.addColorKey();\n    this.bindNodeToTreeData();\n  }\n\n  updateOrgUnits(\n    nodes,\n    animatedStartX,\n    animatedStartY,\n    animatedEndX,\n    animatedEndY\n  ) {\n    let orgUnitSelection = this.virtualContainerNode\n      .selectAll(\".orgUnit\")\n      .data(nodes, (d) => d[\"colorKey\"]);\n    orgUnitSelection\n      .attr(\"class\", \"orgUnit\")\n      .attr(\"x\", function (data) {\n        return data.x0;\n      })\n      .attr(\"y\", function (data) {\n        return data.y0;\n      })\n      .transition()\n      .duration(this.duration)\n      .attr(\"x\", function (data) {\n        return data.x;\n      })\n      .attr(\"y\", function (data) {\n        return data.y;\n      })\n      .attr(\"fillStyle\", \"#ff0000\");\n    orgUnitSelection\n      .enter()\n      .append(\"orgUnit\")\n      .attr(\"class\", \"orgUnit\")\n      .attr(\"x\", animatedStartX)\n      .attr(\"y\", animatedStartY)\n      .transition()\n      .duration(this.duration)\n      .attr(\"x\", function (data) {\n        return data.x;\n      })\n      .attr(\"y\", function (data) {\n        return data.y;\n      })\n      .attr(\"fillStyle\", \"#ff0000\");\n    orgUnitSelection\n      .exit()\n      .transition()\n      .duration(this.duration)\n      .attr(\"x\", animatedEndX)\n      .attr(\"y\", animatedEndY)\n      .remove();\n    // record origin index for animation\n    nodes.forEach((treeNode) => {\n      treeNode[\"x0\"] = treeNode.x;\n      treeNode[\"y0\"] = treeNode.y;\n    });\n    orgUnitSelection = null;\n  }\n\n  updateLinks(\n    links,\n    animatedStartX,\n    animatedStartY,\n    animatedEndX,\n    animatedEndY\n  ) {\n    let linkSelection = this.virtualContainerNode\n      .selectAll(\".link\")\n      .data(links, function (d) {\n        return d.source[\"colorKey\"] + \":\" + d.target[\"colorKey\"];\n      });\n    linkSelection\n      .attr(\"class\", \"link\")\n      .attr(\"sourceX\", function (linkData) {\n        return linkData.source[\"x00\"];\n      })\n      .attr(\"sourceY\", function (linkData) {\n        return linkData.source[\"y00\"];\n      })\n      .attr(\"targetX\", function (linkData) {\n        return linkData.target[\"x00\"];\n      })\n      .attr(\"targetY\", function (linkData) {\n        return linkData.target[\"y00\"];\n      })\n      .transition()\n      .duration(this.duration)\n      .attr(\"sourceX\", function (linkData) {\n        return linkData.source.x;\n      })\n      .attr(\"sourceY\", function (linkData) {\n        return linkData.source.y;\n      })\n      .attr(\"targetX\", function (linkData) {\n        return linkData.target.x;\n      })\n      .attr(\"targetY\", function (linkData) {\n        return linkData.target.y;\n      });\n    linkSelection\n      .enter()\n      .append(\"link\")\n      .attr(\"class\", \"link\")\n      .attr(\"sourceX\", animatedStartX)\n      .attr(\"sourceY\", animatedStartY)\n      .attr(\"targetX\", animatedStartX)\n      .attr(\"targetY\", animatedStartY)\n      .transition()\n      .duration(this.duration)\n      .attr(\"sourceX\", function (link) {\n        return link.source.x;\n      })\n      .attr(\"sourceY\", function (link) {\n        return link.source.y;\n      })\n      .attr(\"targetX\", function (link) {\n        return link.target.x;\n      })\n      .attr(\"targetY\", function (link) {\n        return link.target.y;\n      });\n    linkSelection\n      .exit()\n      .transition()\n      .duration(this.duration)\n      .attr(\"sourceX\", animatedEndX)\n      .attr(\"sourceY\", animatedEndY)\n      .attr(\"targetX\", animatedEndX)\n      .attr(\"targetY\", animatedEndY)\n      .remove();\n    // record origin data for animation\n    links.forEach((treeNode) => {\n      treeNode.source[\"x00\"] = treeNode.source.x;\n      treeNode.source[\"y00\"] = treeNode.source.y;\n      treeNode.target[\"x00\"] = treeNode.target.x;\n      treeNode.target[\"y00\"] = treeNode.target.y;\n    });\n    linkSelection = null;\n  }\n\n  initCanvas() {\n    this.container = this.d3.select(\"#org-chart-container\");\n    this.canvasNode = this.container\n      .append(\"canvas\")\n      .attr(\"class\", \"orgChart\")\n      .attr(\"width\", this.width)\n      .attr(\"height\", this.height);\n    this.hiddenCanvasNode = this.container\n      .append(\"canvas\")\n      .attr(\"class\", \"orgChart\")\n      .attr(\"width\", this.width)\n      .attr(\"height\", this.height)\n      .style(\"display\", \"none\");\n    this.context = this.canvasNode.node().getContext(\"2d\");\n    this.context.translate(this.width / 2, this.padding);\n    this.hiddenContext = this.hiddenCanvasNode.node().getContext(\"2d\");\n    this.hiddenContext.translate(this.width / 2, this.padding);\n  }\n\n  initVirtualNode() {\n    let virtualContainer = document.createElement(\"root\");\n    this.virtualContainerNode = this.d3.select(virtualContainer);\n    this.colorNodeMap = {};\n  }\n\n  addColorKey() {\n    // give each node a unique color\n    const self = this;\n    this.virtualContainerNode.selectAll(\".orgUnit\").each(function () {\n      const node = self.d3.select(this);\n      let newColor = Util.randomColor();\n      while (self.colorNodeMap[newColor]) {\n        newColor = Util.randomColor();\n      }\n      node.attr(\"colorKey\", newColor);\n      node.data()[0][\"colorKey\"] = newColor;\n      self.colorNodeMap[newColor] = node;\n    });\n  }\n\n  bindNodeToTreeData() {\n    // give each node a unique color\n    const self = this;\n    this.virtualContainerNode.selectAll(\".orgUnit\").each(function () {\n      const node = self.d3.select(this);\n      const data = node.data()[0];\n      data.node = node;\n    });\n  }\n\n  drawCanvas() {\n    this.drawShowCanvas();\n    this.drawHiddenCanvas();\n  }\n\n  drawShowCanvas() {\n    this.context.clearRect(-50000, -10000, 100000, 100000);\n    const self = this;\n    // draw links\n    this.virtualContainerNode.selectAll(\".link\").each(function () {\n      const node = self.d3.select(this);\n      const linkPath = self.d3\n        .linkVertical()\n        .x(function (d) {\n          return d.x;\n        })\n        .y(function (d) {\n          return d.y;\n        })\n        .source(function () {\n          return { x: node.attr(\"sourceX\"), y: node.attr(\"sourceY\") };\n        })\n        .target(function () {\n          return { x: node.attr(\"targetX\"), y: node.attr(\"targetY\") };\n        });\n      const path = new Path2D(linkPath());\n      self.context.strokeStyle = \"#595959\";\n      self.context.stroke(path);\n    });\n\n    this.virtualContainerNode.selectAll(\".orgUnit\").each(function () {\n      const node = self.d3.select(this);\n      const treeNode = node.data()[0];\n      const data = treeNode.data;\n      const indexX = Number(node.attr(\"x\")) - self.unitWidth / 2;\n      const indexY = Number(node.attr(\"y\")) - self.unitHeight / 2;\n      const maxWidth = self.unitWidth - 2 * self.unitPadding;\n      // draw unit outline rect (if you want to modify this line ===>   please modify the same line in `drawHiddenCanvas`)\n      // Util.text(self.context, data.title, indexX + self.unitPadding, indexY + self.unitPadding + 30, '20px', '#000000')\n      const titleLineCount = Util.wrapText(\n        self.context,\n        data.name,\n        indexX + self.unitPadding,\n        indexY + self.unitPadding + 13 + 16,\n        maxWidth,\n        \"13\",\n        13,\n        \"#262626\"\n      );\n      const discriptionLineCount = Util.wrapText(\n        self.context,\n        data.title,\n        indexX + self.unitPadding,\n        indexY + self.unitPadding + 12 + 23 + 13 * titleLineCount,\n        maxWidth,\n        \"12\",\n        12,\n        \"#595959\"\n      );\n      // border\n      if (self.selectedNode === data.id) {\n        self.context.fillStyle = \"#096DD9\";\n        Util.roundRect(\n          self.context,\n          indexX - 3,\n          indexY - 3,\n          self.unitWidth + 6,\n          self.unitPadding +\n            self.unitPadding +\n            16 +\n            11 +\n            13 * titleLineCount +\n            12 * discriptionLineCount +\n            6,\n          18,\n          true,\n          false\n        );\n      }\n      self.context.fillStyle = \"#fff\";\n      Util.roundRect(\n        self.context,\n        indexX,\n        indexY,\n        self.unitWidth,\n        self.unitPadding +\n          self.unitPadding +\n          16 +\n          11 +\n          13 * titleLineCount +\n          12 * discriptionLineCount,\n        16,\n        true,\n        false\n      );\n      self.context.fillStyle = \"#DCDFEB\";\n      Util.roundRect(\n        self.context,\n        indexX + self.unitPadding,\n        indexY + self.unitPadding,\n        self.unitWidth - 36,\n        4,\n        2,\n        true,\n        false\n      );\n      if (self.percentEnergy < 50) {\n        self.context.fillStyle = \"#D7776A\";\n      } else {\n        self.context.fillStyle = \"#91B969\";\n      }\n      Util.roundRect(\n        self.context,\n        indexX + self.unitPadding,\n        indexY + self.unitPadding,\n        ((self.unitWidth - 36) / 100) * data.percentEnergy,\n        4,\n        2,\n        true,\n        false\n      );\n      Util.wrapText(\n        self.context,\n        data.name,\n        indexX + self.unitPadding,\n        indexY + self.unitPadding + 13 + 16,\n        maxWidth,\n        \"13\",\n        13,\n        \"#262626\"\n      );\n      Util.wrapText(\n        self.context,\n        data.title,\n        indexX + self.unitPadding,\n        indexY + self.unitPadding + 12 + 23 + 13 * titleLineCount,\n        maxWidth,\n        \"12\",\n        12,\n        \"#595959\"\n      );\n    });\n  }\n\n  /**\n   * fill the node outline with colorKey color\n   */\n  drawHiddenCanvas() {\n    this.hiddenContext.clearRect(-50000, -10000, 100000, 100000);\n    const self = this;\n    this.virtualContainerNode.selectAll(\".orgUnit\").each(function () {\n      const node = self.d3.select(this);\n      self.hiddenContext.fillStyle = node.attr(\"colorKey\");\n      Util.roundRect(\n        self.hiddenContext,\n        Number(node.attr(\"x\")) - self.unitWidth / 2,\n        Number(node.attr(\"y\")) - self.unitHeight / 2,\n        self.unitWidth,\n        self.unitHeight,\n        4,\n        true,\n        false\n      );\n    });\n  }\n\n  setCanvasListener() {\n    this.setClickListener();\n    this.setDragListener();\n    this.setMouseWheelZoomListener();\n  }\n\n  setClickListener() {\n    const self = this;\n    this.canvasNode.node().addEventListener(\"click\", (e) => {\n      const colorStr = Util.getColorStrFromCanvas(\n        self.hiddenContext,\n        e.layerX,\n        e.layerY\n      );\n      const node = self.colorNodeMap[colorStr];\n      if (node) {\n        self.toggleTreeNode(node.data()[0]);\n        self.selectedNode = node.data()[0].data.id;\n        self.update(node.data()[0]);\n      }\n    });\n  }\n\n  setMouseWheelZoomListener() {\n    const self = this;\n    this.canvasNode.node().addEventListener(\"mousewheel\", (event) => {\n      event.preventDefault();\n      if (event.deltaY < 0) {\n        self.bigger();\n      } else {\n        self.smaller();\n      }\n    });\n  }\n\n  setDragListener() {\n    this.onDrag_ = false;\n    this.dragStartPoint_ = { x: 0, y: 0 };\n    const self = this;\n    this.canvasNode.node().onmousedown = function (e) {\n      self.dragStartPoint_.x = e.x;\n      self.dragStartPoint_.y = e.y;\n      self.onDrag_ = true;\n    };\n    this.canvasNode.node().onmousemove = function (e) {\n      if (!self.onDrag_) {\n        return;\n      }\n      self.context.translate(\n        (e.x - self.dragStartPoint_.x) / self.scale,\n        (e.y - self.dragStartPoint_.y) / self.scale\n      );\n      self.hiddenContext.translate(\n        (e.x - self.dragStartPoint_.x) / self.scale,\n        (e.y - self.dragStartPoint_.y) / self.scale\n      );\n      self.dragStartPoint_.x = e.x;\n      self.dragStartPoint_.y = e.y;\n    };\n    this.canvasNode.node().onmouseout = function () {\n      if (self.onDrag_) {\n        self.onDrag_ = false;\n      }\n    };\n    this.canvasNode.node().onmouseup = function () {\n      if (self.onDrag_) {\n        self.onDrag_ = false;\n      }\n    };\n  }\n\n  toggleTreeNode(treeNode) {\n    if (treeNode.children) {\n      treeNode._children = treeNode.children;\n      treeNode.children = null;\n    } else {\n      treeNode.children = treeNode._children;\n      treeNode._children = null;\n    }\n  }\n\n  bigger() {\n    if (this.scale > 7) return;\n    this.clearCanvas_();\n    this.scale = (this.scale * 5) / 4;\n    this.context.scale(5 / 4, 5 / 4);\n    this.hiddenContext.scale(5 / 4, 5 / 4);\n  }\n\n  smaller() {\n    if (this.scale < 0.2) return;\n    this.clearCanvas_();\n    this.scale = (this.scale * 4) / 5;\n    this.context.scale(4 / 5, 4 / 5);\n    this.hiddenContext.scale(4 / 5, 4 / 5);\n  }\n\n  clearCanvas_() {\n    this.context.clearRect(-1000000, -10000, 2000000, 2000000);\n    this.hiddenContext.clearRect(-1000000, -10000, 2000000, 2000000);\n  }\n}\n\nexport default OrgChart;\n"]}]}